(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["npm.agent-base"],{"301b":function(t,e,o){"use strict";function r(t){return function(e,o){return new Promise((r,n)=>{t.call(this,e,o,(t,e)=>{t?n(t):r(e)})})}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"45d8":function(t,e,o){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};const n=o("faa1"),s=r(o("34eb")),i=r(o("301b")),l=s.default("agent-base");function c(t){return Boolean(t)&&"function"===typeof t.addRequest}function a(){const{stack:t}=new Error;return"string"===typeof t&&t.split("\n").some(t=>-1!==t.indexOf("(https.js:")||-1!==t.indexOf("node:https:"))}function u(t,e){return new u.Agent(t,e)}(function(t){class e extends n.EventEmitter{constructor(t,e){super();let o=e;"function"===typeof t?this.callback=t:t&&(o=t),this.timeout=null,o&&"number"===typeof o.timeout&&(this.timeout=o.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return"number"===typeof this.explicitDefaultPort?this.explicitDefaultPort:a()?443:80}set defaultPort(t){this.explicitDefaultPort=t}get protocol(){return"string"===typeof this.explicitProtocol?this.explicitProtocol:a()?"https:":"http:"}set protocol(t){this.explicitProtocol=t}callback(t,e,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(t,e){const o=Object.assign({},e);"boolean"!==typeof o.secureEndpoint&&(o.secureEndpoint=a()),null==o.host&&(o.host="localhost"),null==o.port&&(o.port=o.secureEndpoint?443:80),null==o.protocol&&(o.protocol=o.secureEndpoint?"https:":"http:"),o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,t._last=!0,t.shouldKeepAlive=!1;let r=!1,n=null;const s=o.timeout||this.timeout,u=e=>{t._hadError||(t.emit("error",e),t._hadError=!0)},p=()=>{n=null,r=!0;const t=new Error(`A "socket" was not created for HTTP request before ${s}ms`);t.code="ETIMEOUT",u(t)},h=t=>{r||(null!==n&&(clearTimeout(n),n=null),u(t))},f=e=>{if(r)return;if(null!=n&&(clearTimeout(n),n=null),c(e))return l("Callback returned another Agent instance %o",e.constructor.name),void e.addRequest(t,o);if(e)return e.once("free",()=>{this.freeSocket(e,o)}),void t.onSocket(e);const s=new Error(`no Duplex stream was returned to agent-base for \`${t.method} ${t.path}\``);u(s)};if("function"===typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(l("Converting legacy callback function to promise"),this.promisifiedCallback=i.default(this.callback)):this.promisifiedCallback=this.callback),"number"===typeof s&&s>0&&(n=setTimeout(p,s)),"port"in o&&"number"!==typeof o.port&&(o.port=Number(o.port));try{l("Resolving socket for %o request: %o",o.protocol,`${t.method} ${t.path}`),Promise.resolve(this.promisifiedCallback(t,o)).then(f,h)}catch(d){Promise.reject(d).catch(h)}}else u(new Error("`callback` is not defined"))}freeSocket(t,e){l("Freeing socket %o %o",t.constructor.name,e),t.destroy()}destroy(){l("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(u||(u={})),t.exports=u}}]);
//# sourceMappingURL=npm.agent-base-legacy.b5e643ff.js.map