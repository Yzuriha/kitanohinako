{"version":3,"sources":["webpack:///./node_modules/jws/lib/tostring.js","webpack:///./node_modules/jws/lib/verify-stream.js","webpack:///./node_modules/jws/index.js","webpack:///./node_modules/jws/lib/sign-stream.js","webpack:///./node_modules/jws/lib/data-stream.js"],"names":["Buffer","module","exports","obj","isBuffer","toString","JSON","stringify","DataStream","jwa","Stream","util","JWS_REGEX","isObject","thing","Object","prototype","call","safeJsonParse","parse","e","headerFromJWS","jwsSig","encodedHeader","split","from","securedInputFromJWS","join","signatureFromJWS","payloadFromJWS","encoding","payload","isValidJws","string","test","jwsVerify","algorithm","secretOrKey","err","Error","code","signature","securedInput","algo","verify","jwsDecode","opts","header","typ","json","VerifyStream","secret","publicKey","key","secretStream","this","readable","once","writable","bind","inherits","valid","buffer","emit","decode","isValid","SignStream","ALGORITHMS","sign","createSign","createVerify","base64url","replace","jwsSecuredInput","encodedPayload","format","jwsSign","privateKey","alg","data","alloc","pipe","length","process","nextTick","TypeError","write","concat","end"],"mappings":"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","file":"js/npm.jws-legacy.804ff907.js","sourcesContent":["/*global module*/\nvar Buffer = require('buffer').Buffer;\n\nmodule.exports = function toString(obj) {\n  if (typeof obj === 'string')\n    return obj;\n  if (typeof obj === 'number' || Buffer.isBuffer(obj))\n    return obj.toString();\n  return JSON.stringify(obj);\n};\n","/*global module*/\nvar Buffer = require('safe-buffer').Buffer;\nvar DataStream = require('./data-stream');\nvar jwa = require('jwa');\nvar Stream = require('stream');\nvar toString = require('./tostring');\nvar util = require('util');\nvar JWS_REGEX = /^[a-zA-Z0-9\\-_]+?\\.[a-zA-Z0-9\\-_]+?\\.([a-zA-Z0-9\\-_]+)?$/;\n\nfunction isObject(thing) {\n  return Object.prototype.toString.call(thing) === '[object Object]';\n}\n\nfunction safeJsonParse(thing) {\n  if (isObject(thing))\n    return thing;\n  try { return JSON.parse(thing); }\n  catch (e) { return undefined; }\n}\n\nfunction headerFromJWS(jwsSig) {\n  var encodedHeader = jwsSig.split('.', 1)[0];\n  return safeJsonParse(Buffer.from(encodedHeader, 'base64').toString('binary'));\n}\n\nfunction securedInputFromJWS(jwsSig) {\n  return jwsSig.split('.', 2).join('.');\n}\n\nfunction signatureFromJWS(jwsSig) {\n  return jwsSig.split('.')[2];\n}\n\nfunction payloadFromJWS(jwsSig, encoding) {\n  encoding = encoding || 'utf8';\n  var payload = jwsSig.split('.')[1];\n  return Buffer.from(payload, 'base64').toString(encoding);\n}\n\nfunction isValidJws(string) {\n  return JWS_REGEX.test(string) && !!headerFromJWS(string);\n}\n\nfunction jwsVerify(jwsSig, algorithm, secretOrKey) {\n  if (!algorithm) {\n    var err = new Error(\"Missing algorithm parameter for jws.verify\");\n    err.code = \"MISSING_ALGORITHM\";\n    throw err;\n  }\n  jwsSig = toString(jwsSig);\n  var signature = signatureFromJWS(jwsSig);\n  var securedInput = securedInputFromJWS(jwsSig);\n  var algo = jwa(algorithm);\n  return algo.verify(securedInput, signature, secretOrKey);\n}\n\nfunction jwsDecode(jwsSig, opts) {\n  opts = opts || {};\n  jwsSig = toString(jwsSig);\n\n  if (!isValidJws(jwsSig))\n    return null;\n\n  var header = headerFromJWS(jwsSig);\n\n  if (!header)\n    return null;\n\n  var payload = payloadFromJWS(jwsSig);\n  if (header.typ === 'JWT' || opts.json)\n    payload = JSON.parse(payload, opts.encoding);\n\n  return {\n    header: header,\n    payload: payload,\n    signature: signatureFromJWS(jwsSig)\n  };\n}\n\nfunction VerifyStream(opts) {\n  opts = opts || {};\n  var secretOrKey = opts.secret||opts.publicKey||opts.key;\n  var secretStream = new DataStream(secretOrKey);\n  this.readable = true;\n  this.algorithm = opts.algorithm;\n  this.encoding = opts.encoding;\n  this.secret = this.publicKey = this.key = secretStream;\n  this.signature = new DataStream(opts.signature);\n  this.secret.once('close', function () {\n    if (!this.signature.writable && this.readable)\n      this.verify();\n  }.bind(this));\n\n  this.signature.once('close', function () {\n    if (!this.secret.writable && this.readable)\n      this.verify();\n  }.bind(this));\n}\nutil.inherits(VerifyStream, Stream);\nVerifyStream.prototype.verify = function verify() {\n  try {\n    var valid = jwsVerify(this.signature.buffer, this.algorithm, this.key.buffer);\n    var obj = jwsDecode(this.signature.buffer, this.encoding);\n    this.emit('done', valid, obj);\n    this.emit('data', valid);\n    this.emit('end');\n    this.readable = false;\n    return valid;\n  } catch (e) {\n    this.readable = false;\n    this.emit('error', e);\n    this.emit('close');\n  }\n};\n\nVerifyStream.decode = jwsDecode;\nVerifyStream.isValid = isValidJws;\nVerifyStream.verify = jwsVerify;\n\nmodule.exports = VerifyStream;\n","/*global exports*/\nvar SignStream = require('./lib/sign-stream');\nvar VerifyStream = require('./lib/verify-stream');\n\nvar ALGORITHMS = [\n  'HS256', 'HS384', 'HS512',\n  'RS256', 'RS384', 'RS512',\n  'PS256', 'PS384', 'PS512',\n  'ES256', 'ES384', 'ES512'\n];\n\nexports.ALGORITHMS = ALGORITHMS;\nexports.sign = SignStream.sign;\nexports.verify = VerifyStream.verify;\nexports.decode = VerifyStream.decode;\nexports.isValid = VerifyStream.isValid;\nexports.createSign = function createSign(opts) {\n  return new SignStream(opts);\n};\nexports.createVerify = function createVerify(opts) {\n  return new VerifyStream(opts);\n};\n","/*global module*/\nvar Buffer = require('safe-buffer').Buffer;\nvar DataStream = require('./data-stream');\nvar jwa = require('jwa');\nvar Stream = require('stream');\nvar toString = require('./tostring');\nvar util = require('util');\n\nfunction base64url(string, encoding) {\n  return Buffer\n    .from(string, encoding)\n    .toString('base64')\n    .replace(/=/g, '')\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_');\n}\n\nfunction jwsSecuredInput(header, payload, encoding) {\n  encoding = encoding || 'utf8';\n  var encodedHeader = base64url(toString(header), 'binary');\n  var encodedPayload = base64url(toString(payload), encoding);\n  return util.format('%s.%s', encodedHeader, encodedPayload);\n}\n\nfunction jwsSign(opts) {\n  var header = opts.header;\n  var payload = opts.payload;\n  var secretOrKey = opts.secret || opts.privateKey;\n  var encoding = opts.encoding;\n  var algo = jwa(header.alg);\n  var securedInput = jwsSecuredInput(header, payload, encoding);\n  var signature = algo.sign(securedInput, secretOrKey);\n  return util.format('%s.%s', securedInput, signature);\n}\n\nfunction SignStream(opts) {\n  var secret = opts.secret||opts.privateKey||opts.key;\n  var secretStream = new DataStream(secret);\n  this.readable = true;\n  this.header = opts.header;\n  this.encoding = opts.encoding;\n  this.secret = this.privateKey = this.key = secretStream;\n  this.payload = new DataStream(opts.payload);\n  this.secret.once('close', function () {\n    if (!this.payload.writable && this.readable)\n      this.sign();\n  }.bind(this));\n\n  this.payload.once('close', function () {\n    if (!this.secret.writable && this.readable)\n      this.sign();\n  }.bind(this));\n}\nutil.inherits(SignStream, Stream);\n\nSignStream.prototype.sign = function sign() {\n  try {\n    var signature = jwsSign({\n      header: this.header,\n      payload: this.payload.buffer,\n      secret: this.secret.buffer,\n      encoding: this.encoding\n    });\n    this.emit('done', signature);\n    this.emit('data', signature);\n    this.emit('end');\n    this.readable = false;\n    return signature;\n  } catch (e) {\n    this.readable = false;\n    this.emit('error', e);\n    this.emit('close');\n  }\n};\n\nSignStream.sign = jwsSign;\n\nmodule.exports = SignStream;\n","/*global module, process*/\nvar Buffer = require('safe-buffer').Buffer;\nvar Stream = require('stream');\nvar util = require('util');\n\nfunction DataStream(data) {\n  this.buffer = null;\n  this.writable = true;\n  this.readable = true;\n\n  // No input\n  if (!data) {\n    this.buffer = Buffer.alloc(0);\n    return this;\n  }\n\n  // Stream\n  if (typeof data.pipe === 'function') {\n    this.buffer = Buffer.alloc(0);\n    data.pipe(this);\n    return this;\n  }\n\n  // Buffer or String\n  // or Object (assumedly a passworded key)\n  if (data.length || typeof data === 'object') {\n    this.buffer = data;\n    this.writable = false;\n    process.nextTick(function () {\n      this.emit('end', data);\n      this.readable = false;\n      this.emit('close');\n    }.bind(this));\n    return this;\n  }\n\n  throw new TypeError('Unexpected data type ('+ typeof data + ')');\n}\nutil.inherits(DataStream, Stream);\n\nDataStream.prototype.write = function write(data) {\n  this.buffer = Buffer.concat([this.buffer, Buffer.from(data)]);\n  this.emit('data', data);\n};\n\nDataStream.prototype.end = function end(data) {\n  if (data)\n    this.write(data);\n  this.emit('end', data);\n  this.emit('close');\n  this.writable = false;\n  this.readable = false;\n};\n\nmodule.exports = DataStream;\n"],"sourceRoot":""}