(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["npm.gcp-metadata"],{4823:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.requestTimeout=t.resetIsAvailableCache=t.isAvailable=t.project=t.instance=t.HEADERS=t.HEADER_VALUE=t.HEADER_NAME=t.SECONDARY_HOST_ADDRESS=t.HOST_ADDRESS=t.BASE_PATH=void 0;const r=o("0321"),n=o("d604");function a(e){return e||(e=Object({NODE_ENV:"production",BASE_URL:"/kitanohinako/"}).GCE_METADATA_IP||Object({NODE_ENV:"production",BASE_URL:"/kitanohinako/"}).GCE_METADATA_HOST||t.HOST_ADDRESS),/^https?:\/\//.test(e)||(e="http://"+e),new URL(t.BASE_PATH,e).href}function E(e){Object.keys(e).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${e}' is not a valid configuration option.`)}})}async function s(e,o,s=3,c=!1){o=o||{},"string"===typeof o&&(o={property:o});let u="";"object"===typeof o&&o.property&&(u="/"+o.property),E(o);try{const E=c?i:r.request,p=await E({url:`${a()}/${e}${u}`,headers:Object.assign({},t.HEADERS,o.headers),retryConfig:{noResponseRetries:s},params:o.params,responseType:"text",timeout:D()});if(p.headers[t.HEADER_NAME.toLowerCase()]!==t.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${t.HEADER_NAME} header.`);if(!p.data)throw new Error("Invalid response from the metadata service");if("string"===typeof p.data)try{return n.parse(p.data)}catch(A){}return p.data}catch(p){throw p.response&&200!==p.response.status&&(p.message="Unsuccessful response status code. "+p.message),p}}async function i(e){const o={...e,url:e.url.replace(a(),a(t.SECONDARY_HOST_ADDRESS))};let n=!1;const E=r.request(e).then(e=>(n=!0,e)).catch(e=>{if(n)return s;throw n=!0,e}),s=r.request(o).then(e=>(n=!0,e)).catch(e=>{if(n)return E;throw n=!0,e});return Promise.race([E,s])}function c(e){return s("instance",e)}function u(e){return s("project",e)}function A(){return Object({NODE_ENV:"production",BASE_URL:"/kitanohinako/"}).DETECT_GCP_RETRIES?Number(Object({NODE_ENV:"production",BASE_URL:"/kitanohinako/"}).DETECT_GCP_RETRIES):0}let p;async function _(){try{return void 0===p&&(p=s("instance",void 0,A(),!(Object({NODE_ENV:"production",BASE_URL:"/kitanohinako/"}).GCE_METADATA_IP||Object({NODE_ENV:"production",BASE_URL:"/kitanohinako/"}).GCE_METADATA_HOST))),await p,!0}catch(t){if(Object({NODE_ENV:"production",BASE_URL:"/kitanohinako/"}).DEBUG_AUTH&&console.info(t),"request-timeout"===t.type)return!1;if(t.response&&404===t.response.status)return!1;if((!t.response||404!==t.response.status)&&(!t.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(t.code))){let o="UNKNOWN";t.code&&(o=t.code),e.emitWarning(`received unexpected error = ${t.message} code = ${o}`,"MetadataLookupWarning")}return!1}}function d(){p=void 0}function D(){return Object({NODE_ENV:"production",BASE_URL:"/kitanohinako/"}).K_SERVICE||Object({NODE_ENV:"production",BASE_URL:"/kitanohinako/"}).FUNCTION_NAME?0:3e3}t.BASE_PATH="/computeMetadata/v1",t.HOST_ADDRESS="http://169.254.169.254",t.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.",t.HEADER_NAME="Metadata-Flavor",t.HEADER_VALUE="Google",t.HEADERS=Object.freeze({[t.HEADER_NAME]:t.HEADER_VALUE}),t.instance=c,t.project=u,t.isAvailable=_,t.resetIsAvailableCache=d,t.requestTimeout=D}).call(this,o("4362"))}}]);
//# sourceMappingURL=npm.gcp-metadata.3b04cbcf.js.map