(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["npm.stream-http"],{"925e":function(e,r,t){(function(r,o,n){var a=t("a9f1"),s=t("3fb5"),i=t("c90b"),c=t("e372"),u=t("d938"),f=i.IncomingMessage,d=i.readyStates;function h(e,r){return a.fetch&&r?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&e?"arraybuffer":a.vbArray&&e?"text:vbarray":"text"}var l=e.exports=function(e){var t,o=this;c.Writable.call(o),o._opts=e,o._body=[],o._headers={},e.auth&&o.setHeader("Authorization","Basic "+new r(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(r){o.setHeader(r,e.headers[r])}));var n=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!a.abortController)n=!1,t=!0;else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!a.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}o._mode=h(t,n),o._fetchTimer=null,o.on("finish",(function(){o._onFinish()}))};function p(e){try{var r=e.status;return null!==r&&0!==r}catch(t){return!1}}s(l,c.Writable),l.prototype.setHeader=function(e,r){var t=this,o=e.toLowerCase();-1===m.indexOf(o)&&(t._headers[o]={name:e,value:r})},l.prototype.getHeader=function(e){var r=this._headers[e.toLowerCase()];return r?r.value:null},l.prototype.removeHeader=function(e){var r=this;delete r._headers[e.toLowerCase()]},l.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,s=e._headers,i=null;"GET"!==t.method&&"HEAD"!==t.method&&(i=a.arraybuffer?u(r.concat(e._body)):a.blobConstructor?new o.Blob(e._body.map((function(e){return u(e)})),{type:(s["content-type"]||{}).value||""}):r.concat(e._body).toString());var c=[];if(Object.keys(s).forEach((function(e){var r=s[e].name,t=s[e].value;Array.isArray(t)?t.forEach((function(e){c.push([r,e])})):c.push([r,t])})),"fetch"===e._mode){var f=null;if(a.abortController){var h=new AbortController;f=h.signal,e._fetchAbortController=h,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=o.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),t.requestTimeout))}o.fetch(e._opts.url,{method:e._opts.method,headers:c,body:i||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:f}).then((function(r){e._fetchResponse=r,e._connect()}),(function(r){o.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",r)}))}else{var l=e._xhr=new o.XMLHttpRequest;try{l.open(e._opts.method,e._opts.url,!0)}catch(p){return void n.nextTick((function(){e.emit("error",p)}))}"responseType"in l&&(l.responseType=e._mode.split(":")[0]),"withCredentials"in l&&(l.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in l&&l.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(l.timeout=t.requestTimeout,l.ontimeout=function(){e.emit("requestTimeout")}),c.forEach((function(e){l.setRequestHeader(e[0],e[1])})),e._response=null,l.onreadystatechange=function(){switch(l.readyState){case d.LOADING:case d.DONE:e._onXHRProgress();break}},"moz-chunked-arraybuffer"===e._mode&&(l.onprogress=function(){e._onXHRProgress()}),l.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{l.send(i)}catch(p){return void n.nextTick((function(){e.emit("error",p)}))}}}},l.prototype._onXHRProgress=function(){var e=this;p(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},l.prototype._connect=function(){var e=this;e._destroyed||(e._response=new f(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",(function(r){e.emit("error",r)})),e.emit("response",e._response))},l.prototype._write=function(e,r,t){var o=this;o._body.push(e),t()},l.prototype.abort=l.prototype.destroy=function(){var e=this;e._destroyed=!0,o.clearTimeout(e._fetchTimer),e._response&&(e._response._destroyed=!0),e._xhr?e._xhr.abort():e._fetchAbortController&&e._fetchAbortController.abort()},l.prototype.end=function(e,r,t){var o=this;"function"===typeof e&&(t=e,e=void 0),c.Writable.prototype.end.call(o,e,r,t)},l.prototype.flushHeaders=function(){},l.prototype.setTimeout=function(){},l.prototype.setNoDelay=function(){},l.prototype.setSocketKeepAlive=function(){};var m=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,t("b639").Buffer,t("c8ba"),t("4362"))},9490:function(e,r,t){(function(e){var o=t("925e"),n=t("c90b"),a=t("53a8"),s=t("8c05"),i=t("0b16"),c=r;c.request=function(r,t){r="string"===typeof r?i.parse(r):a(r);var n=-1===e.location.protocol.search(/^https?:$/)?"http:":"",s=r.protocol||n,c=r.hostname||r.host,u=r.port,f=r.path||"/";c&&-1!==c.indexOf(":")&&(c="["+c+"]"),r.url=(c?s+"//"+c:"")+(u?":"+u:"")+f,r.method=(r.method||"GET").toUpperCase(),r.headers=r.headers||{};var d=new o(r);return t&&d.on("response",t),d},c.get=function(e,r){var t=c.request(e,r);return t.end(),t},c.ClientRequest=o,c.IncomingMessage=n.IncomingMessage,c.Agent=function(){},c.Agent.defaultMaxSockets=4,c.globalAgent=new c.Agent,c.STATUS_CODES=s,c.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,t("c8ba"))},a9f1:function(e,r,t){(function(e){r.fetch=i(e.fetch)&&i(e.ReadableStream),r.writableStream=i(e.WritableStream),r.abortController=i(e.AbortController),r.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),r.blobConstructor=!0}catch(c){}var t;function o(){if(void 0!==t)return t;if(e.XMLHttpRequest){t=new e.XMLHttpRequest;try{t.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(c){t=null}}else t=null;return t}function n(e){var r=o();if(!r)return!1;try{return r.responseType=e,r.responseType===e}catch(c){}return!1}var a="undefined"!==typeof e.ArrayBuffer,s=a&&i(e.ArrayBuffer.prototype.slice);function i(e){return"function"===typeof e}r.arraybuffer=r.fetch||a&&n("arraybuffer"),r.msstream=!r.fetch&&s&&n("ms-stream"),r.mozchunkedarraybuffer=!r.fetch&&a&&n("moz-chunked-arraybuffer"),r.overrideMimeType=r.fetch||!!o()&&i(o().overrideMimeType),r.vbArray=i(e.VBArray),t=null}).call(this,t("c8ba"))},c90b:function(e,r,t){(function(e,o,n){var a=t("a9f1"),s=t("3fb5"),i=t("e372"),c=r.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=r.IncomingMessage=function(r,t,s,c){var u=this;if(i.Readable.call(u),u._mode=s,u.headers={},u.rawHeaders=[],u.trailers={},u.rawTrailers=[],u.on("end",(function(){e.nextTick((function(){u.emit("close")}))})),"fetch"===s){if(u._fetchResponse=t,u.url=t.url,u.statusCode=t.status,u.statusMessage=t.statusText,t.headers.forEach((function(e,r){u.headers[r.toLowerCase()]=e,u.rawHeaders.push(r,e)})),a.writableStream){var f=new WritableStream({write:function(e){return new Promise((function(r,t){u._destroyed?t():u.push(new o(e))?r():u._resumeFetch=r}))},close:function(){n.clearTimeout(c),u._destroyed||u.push(null)},abort:function(e){u._destroyed||u.emit("error",e)}});try{return void t.body.pipeTo(f).catch((function(e){n.clearTimeout(c),u._destroyed||u.emit("error",e)}))}catch(y){}}var d=t.body.getReader();function h(){d.read().then((function(e){if(!u._destroyed){if(e.done)return n.clearTimeout(c),void u.push(null);u.push(new o(e.value)),h()}})).catch((function(e){n.clearTimeout(c),u._destroyed||u.emit("error",e)}))}h()}else{u._xhr=r,u._pos=0,u.url=r.responseURL,u.statusCode=r.status,u.statusMessage=r.statusText;var l=r.getAllResponseHeaders().split(/\r?\n/);if(l.forEach((function(e){var r=e.match(/^([^:]+):\s*(.*)/);if(r){var t=r[1].toLowerCase();"set-cookie"===t?(void 0===u.headers[t]&&(u.headers[t]=[]),u.headers[t].push(r[2])):void 0!==u.headers[t]?u.headers[t]+=", "+r[2]:u.headers[t]=r[2],u.rawHeaders.push(r[1],r[2])}})),u._charset="x-user-defined",!a.overrideMimeType){var p=u.rawHeaders["mime-type"];if(p){var m=p.match(/;\s*charset=([^;])(;|$)/);m&&(u._charset=m[1].toLowerCase())}u._charset||(u._charset="utf-8")}}};s(u,i.Readable),u.prototype._read=function(){var e=this,r=e._resumeFetch;r&&(e._resumeFetch=null,r())},u.prototype._onXHRProgress=function(){var e=this,r=e._xhr,t=null;switch(e._mode){case"text:vbarray":if(r.readyState!==c.DONE)break;try{t=new n.VBArray(r.responseBody).toArray()}catch(f){}if(null!==t){e.push(new o(t));break}case"text":try{t=r.responseText}catch(f){e._mode="text:vbarray";break}if(t.length>e._pos){var a=t.substr(e._pos);if("x-user-defined"===e._charset){for(var s=new o(a.length),i=0;i<a.length;i++)s[i]=255&a.charCodeAt(i);e.push(s)}else e.push(a,e._charset);e._pos=t.length}break;case"arraybuffer":if(r.readyState!==c.DONE||!r.response)break;t=r.response,e.push(new o(new Uint8Array(t)));break;case"moz-chunked-arraybuffer":if(t=r.response,r.readyState!==c.LOADING||!t)break;e.push(new o(new Uint8Array(t)));break;case"ms-stream":if(t=r.response,r.readyState!==c.LOADING)break;var u=new n.MSStreamReader;u.onprogress=function(){u.result.byteLength>e._pos&&(e.push(new o(new Uint8Array(u.result.slice(e._pos)))),e._pos=u.result.byteLength)},u.onload=function(){e.push(null)},u.readAsArrayBuffer(t);break}e._xhr.readyState===c.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,t("4362"),t("b639").Buffer,t("c8ba"))}}]);
//# sourceMappingURL=npm.stream-http.c454146f.js.map